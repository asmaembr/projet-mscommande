<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gestion des Commandes</title>
</head>
<body>
<div style="display: flex; gap: 20px;">
    <!-- List of Products -->
    <div>
        <h3>Liste des Produits</h3>
        <table>
            <tr>
                <td>Nom</td>
                <td>Prix</td>
                <td>Type</td>
                <td>Actions</td>
            </tr>
            <tr th:each="produit : ${produits}">
                <td th:text="${produit.nom}"></td>
                <td th:text="${produit.prix}"></td>
                <td th:text="${produit.type}"></td>
                <td>
                    <a th:href="@{'/deleteProduit/' + ${produit.id}}">Supprimer</a>
                    <a th:href="@{'/passerCommande/' + ${produit.id}}">Passer Commande</a>
                </td>
            </tr>
        </table>
    </div>

    <!-- Forms for Product and Commande -->
    <div>
        <!-- Product Creation Form -->
        <h3>Ajouter un Produit</h3>
        <form method="post" th:action="@{/saveProduit}">
            <label>Nom</label>
            <input type="text" name="nom" placeholder="Nom">
            <label>Prix</label>
            <input type="text" name="prix" placeholder="Prix">
            <label>Type</label>
            <select name="type">
                <option th:each="type : ${T(ma.commande.microservicewebapp.model.TypeProduit).values()}"
                        th:value="${type}" th:text="${type}"></option>
            </select>
            <button type="submit">Ajouter</button>
        </form>

        <!-- Commande Creation Form -->
        <h3>Passer une Commande</h3>
        <form method="post" th:action="@{/saveCommande}" th:if="${selectedProduit != null}">
            <input type="hidden" name="idProduit" th:value="${selectedProduit.id}">
            <label>Description</label>
            <input type="text" name="description" placeholder="Description">
            <label>Quantité</label>
            <input type="number" name="quantite" placeholder="Quantité">
            <label>Date</label>
            <input type="date" name="date">
            <label>Montant</label>
            <input type="text" name="montant" placeholder="Montant">
            <button type="submit">Passer Commande</button>
        </form>
    </div>

    <!-- List of Commandes -->
    <div>
        <h3>Liste des Commandes</h3>
        <table>
            <tr>
                <td>Description</td>
                <td>Quantité</td>
                <td>Date</td>
                <td>Montant</td>
                <td>Actions</td>
            </tr>
            <tr th:each="commande : ${commandes}">
                <td th:text="${commande.description}"></td>
                <td th:text="${commande.quantite}"></td>
                <td th:text="${commande.date}"></td>
                <td th:text="${commande.montant}"></td>
                <td>
                    <a th:href="@{'/deleteCommande/' + ${commande.id}}">Supprimer</a>
                </td>
            </tr>
        </table>
    </div>
</div>
</body>
</html>
